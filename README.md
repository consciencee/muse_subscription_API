Реализовано для ОС *nix, для ОС Windows необходимо пеерсмотреть процесс подключения muse с использованием другого бэкенда (напр., BlueMuse)

## Возможности ##

Подключение к muse, получение данных ЭЭГ и инерциальных датчиков (акселерометр, гироскоп и еще что-то).
Получение информации о качестве сигнала с датчиков, запись ЭЭГ в файл (с временными метками, приходящими с muse).
Запись в файл данных из инерциальных датчиков с помощью графического интерфейса пока не осуществляется.

## Установка ##

Клонирование репозитория:

`git clone https://github.com/consciencee/muse_subscription_API`

Установка зависимостей:

`pip3 install -r requirements.txt`

## Запуск ##

_До начала запуска необходимо включить устройство._

Запуск графического интерфейса осуществляется командой:
`python3 gui.py`

Окно интерфейса появится не сразу (см. Особенности интеграции muse+qt)

## Структура проекта ##

gui.py - скрипт с основным приложением с gui, связка логики контроллера muse с виджетами
testbench.py - скрипт со всякими бекэндовскими тестовыми сценариями, примеры

device_controller/ - логика подключения к muse через muselsl, реализация API подписки на события
    container.py - модуль хранения настроек подключенных девайсов
    datareceiver.py - управление получением данных: подключение к потоку с данными, передача данных объектам-подписчикам
    datastream.py - управление процессом стриминга (объектом stream из muselsl): какие данные стримим, начало и остановка потока
    subscription.py - управление подписками на события

gui/ - виджеты
    charts/ - реализация виджетов с графиками (не используется, при использовании нескольких графиков интерфейс виснет. Для просмотра потоковых ЭЭГ рекомендуется использовать viewer2 из muselsl)
    resources/ - шрифты и стили
    mainpanel.py - основное окно
    recordform.py - виджет записи данных в файл
    sensorpane.py - виджет отображения информации о датчиках

plugins/ - плагины, прослушивающие события от muse
    filewriter.py - запись данных в файл
    sensor_quality.py - качество сигнала по всем сенсорам

## Особенности интеграции muse + qt ##

Использование виджетов Qt требует обязательного запуска экземпляра QEventLoop (цикл событий) с помощью инициализации QApplication.
Если реализовать сначала инициализацию QApplication, запустить все виджеты, привязав к ним объект с логикой muse, то приложение не сможет подключиться к потокам данных с muse.
В качестве временного решения сначала запускаются все процессы по настройке и запуску потоков muse, и только потом стартует QApplication. Соответственно виджеты появляются только после завершения всех настроечных процессов muse (а это занимает сек 10).
Главному окну приложения затем передается объект, отвечающий за управление muse, и главное окно начинает прослушивать и отправлять события данному объекту.